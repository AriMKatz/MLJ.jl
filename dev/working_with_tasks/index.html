<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Working with Tasks · MLJ</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>MLJ</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Getting Started</a></li><li><a class="toctext" href="../common_mlj_workflows/">Common MLJ Workflows</a></li><li><a class="toctext" href="../model_search/">Model Search</a></li><li><a class="toctext" href="../machines/">Machines</a></li><li><a class="toctext" href="../evaluating_model_performance/">Evaluating Model Performance</a></li><li><a class="toctext" href="../performance_measures/">Performance Measures</a></li><li><a class="toctext" href="../tuning_models/">Tuning Models</a></li><li><a class="toctext" href="../built_in_transformers/">Built-in Transformers</a></li><li><a class="toctext" href="../composing_models/">Composing Models</a></li><li><a class="toctext" href="../homogeneous_ensembles/">Homogeneous Ensembles</a></li><li><a class="toctext" href="../simple_user_defined_models/">Simple User Defined Models</a></li><li><a class="toctext" href="../adding_models_for_general_use/">Adding Models for General Use</a></li><li><a class="toctext" href="../benchmarking/">Benchmarking</a></li><li class="current"><a class="toctext" href>Working with Tasks</a><ul class="internal"></ul></li><li><a class="toctext" href="../internals/">Internals</a></li><li><a class="toctext" href="../glossary/">Glossary</a></li><li><a class="toctext" href="../api/">API</a></li><li><a class="toctext" href="../mlj_cheatsheet/">MLJ Cheatsheet</a></li><li><a class="toctext" href="../NEWS/">MLJ News</a></li><li><a class="toctext" href="../frequently_asked_questions/">FAQ</a></li><li><a class="toctext" href="../julia_blogpost/">Julia BlogPost</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Working with Tasks</a></li></ul><a class="edit-page" href="https://github.com/alan-turing-institute/MLJ.jl/blob/master/docs/src/working_with_tasks.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Working with Tasks</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Working-with-Tasks-1" href="#Working-with-Tasks-1">Working with Tasks</a></h1><p><em>Warning.</em> The task API may be depreciated in the future. </p><p>In MLJ a <em>task</em> is a synthesis of three elements: <em>data</em>, an <em>interpretation</em> of that data, and a <em>learning objective</em>. Once one has a task one is ready to choose learning models.</p><h3><a class="nav-anchor" id="Scientific-types-and-the-interpretation-of-data-1" href="#Scientific-types-and-the-interpretation-of-data-1">Scientific types and the interpretation of data</a></h3><p>Generally the columns of a table, such as a DataFrame, represents real quantities. However, the nature of a quantity is not always clear from the representation. For example, we might count phone calls using the <code>UInt32</code> type but also use <code>UInt32</code> to represent a categorical feature, such as the species of conifers. MLJ mitigates such ambiguity with the use of scientific types. See <a href="../">Getting Started</a>) for details</p><p>Explicitly specifying scientific types during the construction of a MLJ task is the user&#39;s opportunity to articulate how the supplied data should be interpreted.</p><h3><a class="nav-anchor" id="Learning-objectives-1" href="#Learning-objectives-1">Learning objectives</a></h3><p>In MLJ specifying a learning objective means specifying: (i) whether learning is supervised or not; (ii) whether, in the supervised case, predictions are to be probabilistic or deterministic; and (iii) what part of the data is relevant and what role is each part to play.</p><h3><a class="nav-anchor" id="Sample-usage-1" href="#Sample-usage-1">Sample usage</a></h3><div></div><p>Given some data, </p><pre><code class="language-julia">using RDatasets
df = dataset(&quot;boot&quot;, &quot;channing&quot;);
first(df, 4)</code></pre><table class="data-frame"><thead><tr><th></th><th>Sex</th><th>Entry</th><th>Exit</th><th>Time</th><th>Cens</th></tr><tr><th></th><th>Categorical…</th><th>Int32</th><th>Int32</th><th>Int32</th><th>Int32</th></tr></thead><tbody><p>4 rows × 5 columns</p><tr><th>1</th><td>Male</td><td>782</td><td>909</td><td>127</td><td>1</td></tr><tr><th>2</th><td>Male</td><td>1020</td><td>1128</td><td>108</td><td>1</td></tr><tr><th>3</th><td>Male</td><td>856</td><td>969</td><td>113</td><td>1</td></tr><tr><th>4</th><td>Male</td><td>915</td><td>957</td><td>42</td><td>1</td></tr></tbody></table><p>we can check MLJ&#39;s interpretation of that data:</p><pre><code class="language-julia">schema(df)</code></pre><pre><code class="language-none">(names = (:Sex, :Entry, :Exit, :Time, :Cens),
 types = (CategoricalArrays.CategoricalString{UInt8}, Int32, Int32, Int32, Int32),
 scitypes = (Multiclass{2}, Count, Count, Count, Count),
 nrows = 462,)</code></pre><p>We construct a task by wrapping the data in a learning objective, and coercing the data into a form MLJ will correctly interpret. (The middle three fields of <code>df</code> refer to ages, in months, the last is a flag.):</p><pre><code class="language-julia">task = supervised(data=df,
                  target=:Exit,
                  ignore=:Time,
                  is_probabilistic=true,
                  types=Dict(:Entry=&gt;Continuous,
                             :Exit=&gt;Continuous,
                             :Cens=&gt;Multiclass))
schema(task.X)</code></pre><pre><code class="language-none">(names = (:Sex, :Entry, :Cens),
 types = (CategoricalArrays.CategoricalString{UInt8}, Float64, CategoricalArrays.CategoricalValue{Int32,UInt8}),
 scitypes = (Multiclass{2}, Continuous, Multiclass{2}),
 nrows = 462,)</code></pre><p>Row selection and shuffling:</p><pre><code class="language-julia">task[1:3].y</code></pre><pre><code class="language-none">3-element Array{Float64,1}:
  909.0
 1128.0
  969.0</code></pre><pre><code class="language-julia">using Random
rng = MersenneTwister(1234)
shuffle!(rng, task) # rng is optional
task[1:3].y</code></pre><pre><code class="language-none">3-element Array{Float64,1}:
 1015.0
  976.0
 1044.0</code></pre><p>Counting rows:</p><pre><code class="language-julia">nrows(task)</code></pre><pre><code class="language-none">462</code></pre><p>Listing the models available to complete a task:</p><pre><code class="language-julia">models(task)</code></pre><pre><code class="language-none">1-element Array{NamedTuple,1}:
 (name = ConstantRegressor, package_name = MLJModels, ... )</code></pre><p>Choosing a model and evaluating on the task:</p><pre><code class="language-julia-repl">julia&gt; using RDatasets

julia&gt; iris = dataset(&quot;datasets&quot;, &quot;iris&quot;); # a DataFrame

julia&gt; task = supervised(data=iris, target=:Species, is_probabilistic=true)
┌ Info: 
│ is_probabilistic = true
│ input_scitype = Table{AbstractArray{Continuous,1}} 
└ target_scitype = AbstractArray{Multiclass{3},1}
SupervisedTask @ 4…07

julia&gt; tree = @load DecisionTreeClassifier verbosity=1
import MLJModels ✔
import DecisionTree ✔
import MLJModels.DecisionTree_.DecisionTreeClassifier ✔
MLJModels.DecisionTree_.DecisionTreeClassifier(pruning_purity = 1.0,
                                               max_depth = -1,
                                               min_samples_leaf = 1,
                                               min_samples_split = 2,
                                               min_purity_increase = 0.0,
                                               n_subfeatures = 0,
                                               display_depth = 5,
                                               post_prune = false,
                                               merge_purity_threshold = 0.9,
                                               pdf_smoothing = 0.05,) @ 6…88

julia&gt; mach = machine(tree, task)
Machine{DecisionTreeClassifier} @ 1…95

julia&gt; evaluate!(mach, operation=predict_mode,
                 resampling=Holdout(), measure=misclassification_rate, verbosity=0)
ERROR: MethodError: no method matching apply_tree_proba(::DecisionTree.Node{Float64,CategoricalArrays.CategoricalString{UInt8}}, ::SubArray{Float64,1,Array{Float64,2},Tuple{Int64,Base.Slice{Base.OneTo{Int64}}},true}, ::Array{CategoricalArrays.CategoricalString{UInt8},1})
Closest candidates are:
  apply_tree_proba(::DecisionTree.Node{S,T}, !Matched::Array{S,1}, ::Any) where {S, T} at /home/travis/.julia/packages/DecisionTree/efcVJ/src/classification/main.jl:175
  apply_tree_proba(::Union{DecisionTree.Leaf{T}, DecisionTree.Node{S,T}}, !Matched::Array{S,2}, ::Any) where {S, T} at /home/travis/.julia/packages/DecisionTree/efcVJ/src/classification/main.jl:184
  apply_tree_proba(!Matched::DecisionTree.Leaf{T}, !Matched::Array{S,1}, ::Any) where {S, T} at /home/travis/.julia/packages/DecisionTree/efcVJ/src/classification/main.jl:171</code></pre><h3><a class="nav-anchor" id="API-Reference-1" href="#API-Reference-1">API Reference</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MLJ.supervised" href="#MLJ.supervised"><code>MLJ.supervised</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">task = supervised(data=nothing,
                  types=Dict(),
                  target=nothing,
                  ignore=Symbol[],
                  is_probabilistic=false,
                  verbosity=1)</code></pre><p>Construct a supervised learning task with input features <code>X</code> and target <code>y</code>, where: <code>y</code> is the column vector from <code>data</code> named <code>target</code>, if this is a single symbol, or a vector of tuples, if <code>target</code> is a vector; <code>X</code> consists of all remaining columns of <code>data</code> not named in <code>ignore</code>, and is a table unless it has only one column, in which case it is a vector.</p><p>The data types of elements in a column of <code>data</code> named as a key of the dictionary <code>types</code> are coerced to have a scientific type given by the corresponding value. Possible values are <code>Continuous</code>, <code>Multiclass</code>, <code>OrderedFactor</code> and <code>Count</code>. So, for example, <code>types=Dict(:x1=&gt;Count)</code> means elements of the column of <code>data</code> named <code>:x1</code> will be coerced into integers (whose scitypes are always <code>Count</code>).</p><pre><code class="language-none">task = supervised(X, y;
                  is_probabilistic=false,
                  verbosity=1)</code></pre><p>A more customizable constructor, this returns a supervised learning task with input features <code>X</code> and target <code>y</code>, where: <code>X</code> is a table or vector (univariate inputs), while <code>y</code> must be a vector whose elements are scalars, or tuples scalars (of constant length for ordinary multivariate predictions, and of variable length for sequence prediction). Table rows must correspond to patterns and columns to features. Type coercion is not available for this constructor (but see also <a href="@ref"><code>coerce</code></a>).</p><pre><code class="language-none">X, y = task()</code></pre><p>Returns the input <code>X</code> and target <code>y</code> of the task, also available as <code>task.X</code> and <code>task.y</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/alan-turing-institute/MLJ.jl/blob/7290bc59a7460be34a342e0da65c6a1a13fbd18a/src/tasks.jl#L45-L85">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MLJ.unsupervised" href="#MLJ.unsupervised"><code>MLJ.unsupervised</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">task = unsupervised(data=nothing, types=Dict(), ignore=Symbol[], verbosity=1)</code></pre><p>Construct an unsupervised learning task with given input <code>data</code>, which should be a table or, in the case of univariate inputs, a single vector.</p><p>The data types of elements in a column of <code>data</code> named as a key of the dictionary <code>types</code> are coerced to have a scientific type given by the corresponding value. Possible values are <code>Continuous</code>, <code>Multiclass</code>, <code>OrderedFactor</code> and <code>Count</code>. So, for example, <code>types=Dict(:x1=&gt;Count)</code> means elements of the column of <code>data</code> named <code>:x1</code> will be coerced into integers (whose scitypes are always <code>Count</code>).</p><p>Rows of <code>data</code> must correspond to patterns and columns to features. Columns in <code>data</code> whose names appear in <code>ignore</code> are ignored.</p><pre><code class="language-none">X = task()</code></pre><p>Return the input data in form to be used in models.</p><p>See also <a href="../adding_models_for_general_use/#ScientificTypes.scitype"><code>scitype</code></a>, <a href="../adding_models_for_general_use/#ScientificTypes.scitype_union"><code>scitype_union</code></a> </p></div></div><a class="source-link" target="_blank" href="https://github.com/alan-turing-institute/MLJ.jl/blob/7290bc59a7460be34a342e0da65c6a1a13fbd18a/src/tasks.jl#L89-L113">source</a></section><div class="admonition warning"><div class="admonition-title">Missing docstring.</div><div class="admonition-text"><p>Missing docstring for <code>models</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition warning"><div class="admonition-title">Missing docstring.</div><div class="admonition-text"><p>Missing docstring for <code>localmodels</code>. Check Documenter&#39;s build log for details.</p></div></div><footer><hr/><a class="previous" href="../benchmarking/"><span class="direction">Previous</span><span class="title">Benchmarking</span></a><a class="next" href="../internals/"><span class="direction">Next</span><span class="title">Internals</span></a></footer></article></body></html>
